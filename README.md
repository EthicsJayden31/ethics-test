# 윤리 성향 진단 검사

이 프로젝트는 웹 브라우저에서 동작하는 **윤리 성향 진단 단일 페이지 애플리케이션(SPA)** 입니다. 사용자는 32개 문항에 7점 척도로 응답하고, 시스템은 4개 축(A/B/C/D)의 성향을 계산해 16가지 유형 코드(예: `RIHA`)로 결과를 보여줍니다.

---

## 1) 프로젝트 개요

- **목적**: 윤리적 판단 경향을 간단한 자기진단 형태로 확인
- **구성**: `index.html` 단일 파일(HTML/CSS/JavaScript 포함)
- **특징**
  - 1문항씩 표시되는 설문 화면
  - 페이지 로드 시 설문 문항 1회 무작위 섞기
  - 결과 유형 코드 + 설명 + 관심 주제 + 관련 사상가 제공
  - 요소별 세부 성향 시각화(축별 바/마커)
  - 결과 제출 시 학번(숫자 5자리) 검증 후 전송

---

## 2) 파일 구조

현재 저장소는 아래와 같이 매우 단순한 구조입니다.

- `index.html`: 애플리케이션 전체 소스
- `README.md`: 본 문서

---

## 3) 실행 방법

### A. 가장 간단한 실행(로컬 파일 직접 열기)

1. 저장소를 준비합니다.
2. `index.html` 파일을 브라우저에서 직접 엽니다.

> 주의: 일부 브라우저/환경에서 `file://` 실행 시 제약이 있을 수 있으므로, 아래의 로컬 서버 실행을 권장합니다.

### B. 로컬 서버로 실행(권장)

프로젝트 루트에서 아래 명령을 실행합니다.

```bash
python3 -m http.server 4173
```

그 다음 브라우저에서 접속합니다.

```text
http://localhost:4173/index.html
```

---

## 4) 사용 흐름(사용자 관점)

1. 메인 페이지에서 **검사 시작** 클릭
2. 각 문항에 대해 1~7점 척도로 응답
3. 마지막 문항까지 완료 후 **결과 확인** 클릭
4. 결과 페이지에서 유형/세부 성향 확인
5. **결과 제출** 클릭 시 학번 입력 팝업 노출
   - 안내 문구: `학번을 입력하세요.(예시: 20300)`
   - 숫자 5자리 입력 시에만 제출 가능
   - 성공 시 `제출이 완료되었습니다.` 알림 출력
   - 같은 결과 화면에서는 중복 제출 차단

---

## 5) 코드 동작 설명

## 5-1. 설문 데이터와 무작위 섞기

- `questions` 배열에 문항이 정의되어 있습니다.
- 페이지 로드 시 `shuffleInPlace()`(Fisher–Yates)로 배열을 **한 번만** 섞습니다.
- 이로 인해 사용자마다 문항 순서가 달라질 수 있습니다.

## 5-2. 응답 저장과 이동

- `answers` 배열에 문항별 응답값을 저장합니다.
- `renderQuestion()`이 현재 문항을 그리고, `updateButtons()`가 이전/다음/결과 버튼 상태를 관리합니다.
- 모든 문항 응답이 완료되어야 결과 계산이 가능합니다.

## 5-3. 결과 계산 로직

- 축 구성
  - A: `R` vs `P`
  - B: `I` vs `C`
  - C: `H` vs `E`
  - D: `A` vs `S`
- 각 축에서 양쪽 극의 평균을 비교해 우세 극을 결정합니다.
- 평균이 매우 비슷하면(근접 구간) 보조 규칙(강한 응답 수, 확신도)로 tie-break를 수행합니다.
- 최종적으로 4글자 코드(예: `PCES`)를 만들고 `typeDB`에서 설명/주제/사상가를 조회합니다.

## 5-4. 세부 성향 시각화

- 축별 `diff`를 바탕으로 마커 위치를 계산합니다.
- `diff > 0`이면 왼쪽 성향(p1), `diff < 0`이면 오른쪽 성향(p2)에 더 가깝게 표시합니다.
- 태그(`중간`, `조금 더 가까움`, `꽤 가까움`, `많이 가까움`)로 거리감을 정성적으로 표시합니다.

## 5-5. 결과 제출

- `submitResult()`에서 다음 절차를 수행합니다.
  1. 결과가 생성되었는지 확인
  2. 이미 제출되었는지 확인(중복 제출 차단)
  3. `prompt`로 학번 입력
  4. 숫자 5자리 형식 검증
  5. `student_id`를 포함한 payload 전송
- 전송 방식은 `sendBeacon` 우선, 실패/미지원 시 `fetch(no-cors)` 폴백을 사용합니다.

---

## 6) 버전 표기

- 하단 고정 버전 표시(`APP_VERSION`)는 화면 우측 하단에 짧게 표시됩니다.
- 배포/수정 시 `APP_VERSION` 값을 갱신해 이력 관리를 권장합니다.

---

## 7) 커스터마이징 가이드

### 문항 수정

- `questions` 배열 항목을 추가/수정/삭제합니다.
- 각 항목은 `{ t, axis, pole }` 형태를 유지해야 합니다.

### 유형 설명 수정

- `typeDB`의 각 코드(`RIHA` 등)에 대해
  - `name`
  - `desc`
  - `issues`
  - `thinkers`
  를 조정하면 결과 텍스트가 변경됩니다.

### 스타일 수정

- `index.html` 상단 `<style>` 블록에서
  - 컬러 변수(`:root`)
  - 카드/버튼/반응형 레이아웃
  - 결과 섹션 스타일
  을 직접 조정할 수 있습니다.

### 제출 엔드포인트 변경

- `GAS_WEBAPP_URL` 값을 원하는 웹앱 URL로 변경하면 됩니다.

---

## 8) 운영 시 주의사항

- 본 검사는 교육/자가진단 성격의 도구이며, 임상/의학적 진단 도구가 아닙니다.
- 학번 등 식별정보를 수집할 경우, 기관 정책 및 개인정보 보호 규정을 반드시 준수하세요.
- 전송 로그 및 저장 정책(보관 기간, 접근 권한)을 사전에 명확히 정의하는 것을 권장합니다.

---

## 9) 향후 개선 아이디어

- 제출 시 `prompt` 대신 커스텀 모달 UI 적용(접근성/사용성 개선)
- 문항 랜덤 시드 고정 옵션(반/학급 단위 동일 순서 실험)
- 결과 내보내기(CSV/PDF) 기능
- 관리자용 집계 대시보드 연동

